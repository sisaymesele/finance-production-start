{% extends "dashboard.html" %}

{% block content %}
<!-- Back Button -->
<div class="mb-3">
    <a href="{{ back_url }}"
       class="btn btn-secondary"
       hx-get="{{ back_url }}"
       hx-target="#full-page-container"
       hx-swap="innerHTML"
       hx-push-url="true">
        ‚Üê Back to Strategic Action Plan List
    </a>
</div>

<!-- Centered Form Container -->
<div class="d-flex justify-content-center">
    <div class="p-2 border rounded shadow-lg bg-white" style="width: 80%;" id="form-container">

        <!-- Title -->
        <div class="mb-3 text-center">
            <h4 class="mb-0">{{ form_title }}</h4>
        </div>

        <!-- Form Errors -->
        {% if form.errors %}
        <div class="alert alert-danger">
            <ul class="mb-0">
                {% for field in form %}
                    {% for error in field.errors %}
                        <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Form -->
        <form method="POST"
              {% if edit_strategic_action_plan %}
              hx-post="{% url 'update_strategic_action_plan' strategy_by_cycle.slug edit_strategic_action_plan.pk %}"
              {% else %}
              hx-post="{% url 'create_strategic_action_plan' strategy_by_cycle.slug %}"
              {% endif %}
              hx-target="#full-page-container"
              hx-swap="innerHTML"
              hx-push-url="true">

            {% csrf_token %}

            <div class="mb-3">
                {{ form.as_p }}
            </div>

            <div class="text-end">
                <button class="btn btn-dark" type="submit">
                    {{ submit_button_text|default:"Submit" }}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
